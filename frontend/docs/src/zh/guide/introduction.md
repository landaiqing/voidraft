# ç®€ä»‹

> voidraft æ˜¯ä¸€æ¬¾é¢å‘å¼€å‘è€…çš„ã€Œå—å¼å·¥ä½œå°ã€ï¼Œç”¨ CodeMirror 6 æ‰“é€  Heynote é£æ ¼çš„ä½“éªŒï¼Œå¹¶ç»“åˆ Wails3 + Go åç«¯æä¾›ç³»ç»Ÿæ‰˜ç›˜ã€å…¨å±€çƒ­é”®ã€è‡ªåŠ¨å¤‡ä»½ç­‰æ¡Œé¢çº§èƒ½åŠ›ã€‚

![ä¸»ç•Œé¢æ€»è§ˆå ä½](/img/placeholder-main-ui.png)
> å°† `/img/placeholder-main-ui.png` æ›¿æ¢ä¸ºçœŸå®çš„åº”ç”¨ä¸»ç•Œé¢æˆªå›¾ï¼Œæ¼”ç¤ºæ•°æ®é¢æ¿ã€å·¥å…·æ å’Œå³ä¾§å°åœ°å›¾ã€‚

## äº§å“å®šä½
- **æ ¸å¿ƒè¯‰æ±‚**ï¼šåœ¨ä¸€å¤„å¿«é€Ÿè®°å½•ä»£ç /é…ç½®/API å“åº”/å¾…åŠæ¸…å•ï¼Œå¹¶èƒ½éšæ—¶é‡æ’ã€æ ¼å¼åŒ–ã€è¿è¡Œæˆ–æœç´¢ã€‚
- **ç›®æ ‡ç”¨æˆ·**ï¼šéœ€è¦è·¨é¡¹ç›®ç®¡ç†é›¶ç¢æ–‡æœ¬çš„å¼€å‘è€…ã€DevOpsã€æµ‹è¯•æˆ–äº§å“æŠ€æœ¯å†™ä½œè€…ã€‚
- **è®¾è®¡ç†å¿µ**ï¼šæ‰€æœ‰å†…å®¹éƒ½æ‹†æˆå¯é‡æ’çš„å—ï¼ˆ`âˆâˆâˆlanguage`ï¼‰ï¼›æ¯ä¸ªå—æ‹¥æœ‰ç‹¬ç«‹è¯­è¨€ã€æ ¼å¼åŒ–å™¨ä¸æ‰©å±•ï¼›å¤šçª—å£/å¤šæ ‡ç­¾ä¿è¯åŒä¸€ä»½æ•°æ®çš„ä¸åŒè§†è§’ã€‚

## é¢å‘åœºæ™¯
1. **ä¸´æ—¶ä»£ç /è„šæœ¬è‰ç¨¿**ï¼šæ”¯æŒ 30+ è¯­è¨€é«˜äº®ã€Prettier æ ¼å¼åŒ–ã€å½©è™¹æ‹¬å·ã€æ–‡æœ¬é«˜äº®ã€‚
2. **API è°ƒè¯•å°**ï¼šHTTP å—å†…ç½®è¿è¡Œå™¨ã€å˜é‡è§£æã€å“åº”æ’å…¥ï¼›è¯·æ±‚å’Œå“åº”å§‹ç»ˆå’Œæ–‡æ¡£å…±å­˜ã€‚
3. **ä¼šè®® & éœ€æ±‚è®°å½•**ï¼šMarkdown å— + Checkbox æ‰©å±• + é¢œè‰²æ ‡æ³¨å¿«é€Ÿæ•´ç†æƒ³æ³•ã€‚
4. **ç¿»è¯‘ä¸ç ”ç©¶**ï¼šé€‰ä¸­æ–‡æœ¬å³å¯è°ƒ Bing/Google/DeepL/TartuNLP/æœ‰é“ç¿»è¯‘ï¼Œç»“æœå†…è”å‘ˆç°ã€‚
5. **å¤šçª—å£èµ„æ–™å¢™**ï¼šé‡è¦æ–‡æ¡£å¯å¼¹å‡ºç‹¬ç«‹æ— è¾¹æ¡†çª—å£ï¼Œä¾é™„ï¼ˆSnapï¼‰åœ¨ä¸»çª—å£ä¾§è¾¹ã€‚

## æ ¸å¿ƒæ¦‚å¿µ
### å—å¼ç¼–è¾‘å™¨
- è§£æå™¨ä½äº `frontend/src/views/editor/extensions/codeblock`ï¼Œä¾èµ–è‡ªç ” Lezer è¯­æ³•æ ‘ç¡®ä¿ `âˆâˆâˆ` åˆ†éš”ç¬¦ç¨³å®šã€‚
- å—ç»“æ„ï¼ˆè¯­è¨€ã€æ˜¯å¦è‡ªåŠ¨æ£€æµ‹ã€æ­£æ–‡èŒƒå›´ï¼‰å­˜å…¥ `blockState`ï¼Œä¾›æ ¼å¼åŒ–ã€ç§»åŠ¨ã€å¤åˆ¶ã€HTTP æ‰§è¡Œç­‰æ‰©å±•å¤ç”¨ã€‚
- `math` å—ä½¿ç”¨ `math.js` è¿è¡Œå™¨ï¼Œ`http` å—è°ƒç”¨ request parser + gutter run widgetã€‚

### æ‰©å±•é©±åŠ¨
- åç«¯é€šè¿‡ `internal/models/extensions.go` å®šä¹‰æ‰©å±• ID/é…ç½®ï¼Œ`ExtensionService` è´Ÿè´£æŒä¹…åŒ–ã€‚
- å‰ç«¯ `ExtensionManager` æ ¹æ®æ‰©å±•é…ç½®åŠ¨æ€æ‹¼è£… CodeMirror Extension pipelineï¼ˆå°åœ°å›¾ã€VSCode Searchã€Translatorã€Color Picker ç­‰ï¼‰ã€‚
- æ‰€æœ‰æ‰©å±•éƒ½å¯åœ¨è®¾ç½®é¡µçƒ­åˆ‡æ¢ï¼Œç«‹å³åŒæ­¥åˆ°å½“å‰ä¸æ‰€æœ‰å·²æ‰“å¼€çš„ç¼–è¾‘å™¨å®ä¾‹ã€‚

### æ•°æ®ä¸å®‰å…¨
- SQLite æ•°æ®ä¿å­˜åœ¨ `%USERPROFILE%/.voidraft/data/voidraft.db`ï¼ˆå¯åœ¨è®¾ç½®ä¸­è‡ªå®šä¹‰ dataPathï¼‰ã€‚
- `DatabaseService` è‡ªåŠ¨è¿ç§»è¡¨ç»“æ„ï¼Œ`DocumentService` æä¾›è½¯åˆ é™¤/é”å®šæœºåˆ¶é¿å…è¯¯åˆ é»˜è®¤è‰ç¨¿ã€‚
- `BackupService` åŸºäº go-gitï¼ˆSSH/Token/ç”¨æˆ·åå¯†ç ï¼‰æŠŠ dataPath git åŒ–ï¼Œå¯æŒ‰åˆ†é’Ÿå…¨é‡æäº¤ã€æ¨é€åˆ° GitHub/Gitea ç­‰ã€‚
- `SelfUpdateService` åŒæ—¶è½®è¯¢ GitHub/Gitea Releaseï¼Œæ”¯æŒè‡ªåŠ¨ä¸‹è½½ + ä¸€é”®é‡å¯ã€‚

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ
| å±‚çº§ | è¯´æ˜ | å…³é”®è·¯å¾„ |
| --- | --- | --- |
| æ¡Œé¢å®¹å™¨ | Wails3 + Go 1.21ï¼Œè´Ÿè´£çª—å£ã€æ‰˜ç›˜ã€çƒ­é”®ã€æœåŠ¡æ³¨å…¥ | `main.go`, `internal/services` |
| åç«¯æœåŠ¡ | Config/Document/Extension/Theme/Backup/Window/Hotkey/Translation ç­‰ | `internal/services/*.go` |
| æ•°æ®æ¨¡å‹ | Documentã€Themeã€KeyBindingã€GitBackupã€Config | `internal/models` |
| å‰ç«¯åº”ç”¨ | Vue 3 + Vite + Pinia + vue-router | `frontend/src` |
| ç¼–è¾‘å™¨å†…æ ¸ | CodeMirror 6 æ‰©å±•åŠè‡ªç ”å—è§£æã€HTTP DSLã€Markdown é¢„è§ˆ | `frontend/src/views/editor` |
| æ–‡æ¡£ç«™ç‚¹ | VitePressï¼Œå¤šè¯­è¨€å¯¼èˆª | `frontend/docs` |

## æ¨¡å—é€Ÿè§ˆ
- **æ–‡æ¡£å­˜å‚¨**ï¼š`DocumentService` æ”¯æŒåˆ›å»º/é‡å‘½å/è½¯åˆ é™¤/æ¢å¤ã€å¤šçª—å£å¹¶å‘æ‰“å¼€åŒä¸€æ–‡æ¡£ã€‚
- **ç¼–è¾‘å™¨å®ä¾‹ç®¡ç†**ï¼š`editorStore` ä½¿ç”¨ LRU ç¼“å­˜ + è‡ªåŠ¨ä¿å­˜è®¡æ—¶å™¨ï¼Œç¡®ä¿åœ¨å¤šæ–‡æ¡£åˆ‡æ¢æ—¶ä¿ç•™å…‰æ ‡ä½ç½®ã€æœªä¿å­˜å†…å®¹ã€‚
- **HTTP å®¢æˆ·ç«¯**ï¼š`extensions/httpclient` åŒ…æ‹¬ Lezer è¯­æ³•ã€å˜é‡è§£æã€å“åº”æ’å…¥ä¸è¿è¡Œ gutterï¼›æ”¯æŒ JSON/FormData/GraphQL ç­‰å¤šä½“æ ¼å¼ã€‚
- **Markdown é¢„è§ˆ**ï¼š`panelStore` ç®¡ç†é€æ–‡æ¡£çš„é¢„è§ˆçŠ¶æ€ï¼Œå¯éšå—å®æ—¶åˆ·æ–°ã€‚
- **å¤šçª—å£/å¸é™„**ï¼š`WindowService` + `WindowSnapService` æ ¹æ®ä¸»çª—å£ä½ç½®æ™ºèƒ½å¸é™„å­çª—å£ã€è‡ªåŠ¨è®°å¿†å°ºå¯¸ã€‚
- **å…¨å±€çƒ­é”®**ï¼š`HotkeyService` ç›‘å¬ç³»ç»Ÿçº§ç»„åˆé”®ï¼Œåˆ‡æ¢çª—å£æ˜¾éšï¼ˆé»˜è®¤ Alt+Xï¼Œå¯é…ç½®ï¼‰ã€‚
- **ç³»ç»Ÿæ‰˜ç›˜**ï¼š`systray.SetupSystemTray` æ³¨å…¥æ˜¾ç¤º/éšè—ã€é€€å‡ºã€å¼€æœºå¯åŠ¨ç­‰æ“ä½œã€‚
- **ç¿»è¯‘ç”Ÿæ€**ï¼š`TranslationService` èšåˆ Bing/Google/Youdao/DeepL/TartuNLPï¼Œå‰ç«¯ `translator` æ‰©å±•æä¾› Tooltip + å¤åˆ¶ã€‚
- **ä¸»é¢˜ä¸å¤–è§‚**ï¼š`ThemeService` é¢„ç½® 12+ ä¸»é¢˜ï¼Œå¯é‡ç½®/å…‹éš†ï¼›å‰ç«¯ `createThemeExtension` å³æ—¶åº”ç”¨ã€‚

## æ•°æ®æµï¼ˆä»é”®ç›˜åˆ°æŒä¹…åŒ–ï¼‰
1. ç”¨æˆ·æŒ‰é”® -> CodeMirror extensions æ›´æ–°æ–‡æ¡£ã€‚
2. `contentChangeExtension` è®°å½•è„çŠ¶æ€å¹¶åˆ·æ–° `documentStats`ï¼ˆè¡Œæ•°ã€å­—ç¬¦æ•°ã€é€‰åŒºå­—ç¬¦æ•°ï¼‰ã€‚
3. è§¦å‘è‡ªåŠ¨ä¿å­˜è®¡æ—¶å™¨ï¼ˆé»˜è®¤ 2sï¼‰ -> `DocumentService.UpdateDocumentContent` å†™å…¥ SQLiteã€‚
4. è‹¥å¼€å¯ Git è‡ªåŠ¨å¤‡ä»½ï¼Œæ¯æ¬¡ Commit ä¼šåºåˆ—åŒ–æ•°æ®åº“ + é™„å¸¦ `voidraft_data.bin`ã€‚
5. é…ç½®å˜æ›´ï¼ˆPinia storeï¼‰é€šè¿‡ `ConfigService.Set` ä¼ å› Goï¼Œå¹¶è§¦å‘è§‚å¯Ÿè€…ï¼ˆå¦‚ WindowSnap/Hotkey/Backupï¼‰ã€‚

## ç‰ˆæœ¬èŠ‚å¥ä¸è·¯çº¿å›¾
- âœ… å½“å‰å®ç°ï¼šå¤šçª—å£ã€æ ‡ç­¾é¡µã€HTTP å®¢æˆ·ç«¯ã€Markdown Previewã€æ•°å­¦å—ã€å½©è™¹æ‹¬å·ã€ç¿»è¯‘ã€Git å¤‡ä»½ã€è‡ªåŠ¨æ›´æ–°ã€‚
- ğŸš§ è¿›è¡Œä¸­ï¼šè‡ªå®šä¹‰æ‰©å±•å¯¼å…¥ã€é”®ä½æ¨¡ç‰ˆã€Linux/macOS åŸç”Ÿæ‰“åŒ…ã€‚
- ğŸ—ºï¸ è§„åˆ’ä¸­ï¼šå‰ªè´´æ¿å†å²ã€å›¢é˜ŸåŒæ­¥ã€äº‘ç«¯æ¨¡æ¿å¸‚åœºã€‚

## ä¸‹ä¸€æ­¥
- [å®‰è£… voidraft](/zh/guide/installation)
- [ç•Œé¢æ€»è§ˆ](/zh/guide/ui-overview)
- [å¿«é€Ÿå¼€å§‹](/zh/guide/getting-started)
